// <autogenerated>
//   This file was generated by T4 code generator Script_OutputDto.tt.
//   Any changes made to this file manually will be lost next time the file is regenerated.
// </autogenerated>

import { Component, AfterViewInit, Injector, } from '@angular/core';
import { AuthConfig } from '@shared/osharp/osharp.model';
import { GridComponentBase } from '@shared/osharp/services/kendoui.service';

@Component({
  selector: 'admin-pack',
  template: `<div id="grid-box-{{moduleName}}"></div>`
})

export class PackComponent extends GridComponentBase implements AfterViewInit {

  constructor(injector: Injector) {
    super(injector);
    this.moduleName = "pack";
  }

  async ngAfterViewInit() {
    await this.checkAuth();
    if (this.auth.Read) {
      super.InitBase();
      super.ViewInitBase();
    } else {
      this.osharp.error("无权查看此页面");
    }
  }

  protected AuthConfig(): AuthConfig {
    return new AuthConfig("Root.Admin.Systems.Pack", ["Read"]);
  }

  protected GetModel() {
    return {
      id: "Id",
      fields: {
        Name: { type: "string" },
        Display: { type: "string" },
        Class: { type: "string" },
        Level: { type: "number" },
        Order: { type: "number" },
        IsEnabled: { type: "boolean" },
      }
    };
  }

  protected GetGridColumns(): kendo.ui.GridColumn[] {
    let columns: kendo.ui.GridColumn[] = [
      {
        command: [
          { name: "destroy", iconClass: "k-icon k-i-delete", text: "", visible: d => d.Deletable },
        ],
        width: 100
      }, {
        field: "Name", title: "名称",
        template: '#=Display#',
        filterable: this.osharp.data.stringFilterable
      }, {
        field: "Class", title: "名称",
        filterable: this.osharp.data.stringFilterable
      }, {
        field: "Level", title: "级别", width: 120,
        template: d => this.osharp.valueToText(d.Level, this.osharp.data.packLevel),
        editor: ($container, options) => this.kendoui.DropDownListEditor($container, options, this.osharp.data.packLevel),
        filterable: { ui: el => this.kendoui.DropDownList(el, this.osharp.data.packLevel) }
      }, {
        field: "Order", title: "启动顺序", width: 100
      }, {
        field: "IsEnabled", title: "是否启用", width: 90,
        template: d => this.kendoui.Boolean(d.IsEnabled),
        editor: (container, options) => this.kendoui.BooleanEditor(container, options)
      }
    ];
    return columns;
  }
}
